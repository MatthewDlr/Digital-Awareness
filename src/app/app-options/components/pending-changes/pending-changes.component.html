<div
  class="bg-purple-50 flex h-fit flex-row items-center gap-4 rounded-xl px-5 py-4"
  *ngIf="areChangesPending"
>
  <!-- SVG Timer Animation -->
  <svg
    *ngIf="!canChangesBeValidated"
    class="h-10 w-10"
    id="20032"
    viewBox="0 0 32 32"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g transform="matrix(1,0,0,1,0,0)">
      <g id="20032" opacity="1" style="mix-blend-mode: normal">
        <g>
          <defs>
            <clipPath
              id="20032_clipPath"
              x="-50%"
              y="-50%"
              width="200%"
              height="200%"
            >
              <path
                d="M0,0h32v0v32v0h-32v0v-32z"
                fill="white"
                clip-rule="nonzero"
              ></path>
            </clipPath>
          </defs>
          <g clip-path="url(#20032_clipPath)">
            <g transform="matrix(1,0,0,1,4,4)">
              <g id="20033" opacity="1" style="mix-blend-mode: normal">
                <g>
                  <g>
                    <g style="mix-blend-mode: NORMAL">
                      <g>
                        <path
                          id="20033_stroke_path"
                          d="M24,12c0,1.57586 -0.31039,3.13629 -0.91344,4.5922c-0.60306,1.45591 -1.48697,2.77878 -2.60127,3.89308c-1.1143,1.1143 -2.43717,1.99822 -3.89308,2.60127c-1.45591,0.60306 -3.01634,0.91344 -4.5922,0.91344c-1.57586,0 -3.13629,-0.31039 -4.5922,-0.91344c-1.45591,-0.60306 -2.77878,-1.48697 -3.89308,-2.60127c-1.1143,-1.1143 -1.99822,-2.43717 -2.60127,-3.89308c-0.60306,-1.45591 -0.91345,-3.01634 -0.91345,-4.5922c0,-3.1826 1.26428,-6.23484 3.51472,-8.48528c2.25044,-2.25044 5.30268,-3.51472 8.48528,-3.51472c3.1826,0 6.23484,1.26428 8.48528,3.51472c2.25044,2.25044 3.51472,5.30268 3.51472,8.48528z"
                          fill="none"
                          class="stroke-purple-600 dark:stroke-purple-400"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-dasharray="0 0"
                          stroke-opacity="1"
                        ></path>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
            <g transform="matrix(1,0,0,1,16,8)">
              <g id="20034" opacity="1" style="mix-blend-mode: normal">
                <g>
                  <g>
                    <g style="mix-blend-mode: NORMAL">
                      <g>
                        <path
                          id="20034_stroke_path"
                          d="M0,9v-7"
                          fill="none"
                          class="stroke-purple-600 dark:stroke-purple-400"
                          stroke-linecap="round"
                          stroke-linejoin="miter"
                          stroke-dasharray="0 0"
                          stroke-opacity="1"
                          stroke-width="2"
                        ></path>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </g>
    <animateTransform
      href="#20033"
      attributeName="transform"
      type="translate"
      values="12 12;12 12;12 12;12 12;12 12"
      dur="2.5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.4;0.5;0.6;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animateTransform
      href="#20033"
      attributeName="transform"
      type="scale"
      values="1 1;1 1;1.05 1.05;1 1;1 1"
      dur="2.5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.4;0.5;0.6;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animateTransform
      href="#20033"
      attributeName="transform"
      type="translate"
      values="-12 -12;-12 -12;-12 -12;-12 -12;-12 -12"
      dur="2.5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.4;0.5;0.6;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animateTransform
      href="#20034"
      attributeName="transform"
      type="rotate"
      values="0 0 9;360 0 9;360 0 9"
      dur="2.5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.5;1"
      keySplines="0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
  </svg>

  <!-- Validation Animation -->
  <svg
    *ngIf="canChangesBeValidated"
    class="h-10 w-10"
    id="20185"
    viewBox="0 0 32 32"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g transform="matrix(1,0,0,1,0,0)">
      <g id="20185" opacity="1" style="mix-blend-mode: normal">
        <g>
          <defs>
            <clipPath
              id="20185_clipPath"
              x="-50%"
              y="-50%"
              width="200%"
              height="200%"
            >
              <path
                d="M0,0h32v0v32v0h-32v0v-32z"
                fill="white"
                clip-rule="nonzero"
              ></path>
            </clipPath>
          </defs>
          <g clip-path="url(#20185_clipPath)">
            <g transform="matrix(1,0,0,1,4,4)">
              <g id="20186" opacity="1" style="mix-blend-mode: normal">
                <g>
                  <g>
                    <g style="mix-blend-mode: NORMAL">
                      <g>
                        <path
                          id="20186_stroke_path"
                          d="M24,12c0,1.69067 -0.84,3.18667 -2.124,4.09067c0.13834,0.79036 0.08418,1.60242 -0.1579,2.3674c-0.24208,0.76499 -0.66494,1.46037 -1.23277,2.02727c-0.56689,0.56783 -1.26228,0.99069 -2.02727,1.23277c-0.76499,0.24208 -1.57704,0.29623 -2.3674,0.15789c-0.46105,0.65664 -1.07353,1.19251 -1.7856,1.56223c-0.71207,0.36973 -1.50274,0.56242 -2.30507,0.56177c-1.69067,0 -3.18667,-0.84 -4.09067,-2.124c-0.79036,0.13823 -1.60238,0.08401 -2.36735,-0.15806c-0.76497,-0.24207 -1.46036,-0.66486 -2.02732,-1.23261c-0.56783,-0.56689 -0.9907,-1.26228 -1.23277,-2.02727c-0.24208,-0.76499 -0.29624,-1.57704 -0.1579,-2.3674c-0.65664,-0.46105 -1.19251,-1.07353 -1.56223,-1.7856c-0.36973,-0.71207 -0.56242,-1.50274 -0.56177,-2.30507c0,-1.69067 0.84,-3.18667 2.124,-4.09067c-0.13834,-0.79036 -0.08418,-1.60242 0.1579,-2.3674c0.24208,-0.76499 0.66494,-1.46037 1.23277,-2.02726c0.56696,-0.56774 1.26235,-0.99054 2.02732,-1.23261c0.76497,-0.24207 1.57699,-0.29629 2.36735,-0.15806c0.46112,-0.65656 1.07363,-1.19236 1.78568,-1.56208c0.71205,-0.36972 1.50268,-0.56246 2.30499,-0.56192c1.69067,0 3.18666,0.84 4.09066,2.124c0.79036,-0.13823 1.60238,-0.08401 2.36735,0.15806c0.76497,0.24207 1.46036,0.66487 2.02732,1.23261c0.56774,0.56696 0.99054,1.26235 1.23261,2.02732c0.24207,0.76497 0.29629,1.57699 0.15806,2.36735c0.65664,0.46105 1.19251,1.07353 1.56223,1.7856c0.36973,0.71207 0.56242,1.50274 0.56177,2.30507z"
                          fill="none"
                          class="stroke-purple-600 dark:stroke-purple-400"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-dasharray="0 0"
                          stroke-opacity="1"
                        ></path>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
            <g transform="matrix(1,0,0,1,12,13)">
              <g id="20188" opacity="0" style="mix-blend-mode: normal">
                <g>
                  <g>
                    <g style="mix-blend-mode: NORMAL">
                      <g>
                        <path
                          id="20188_stroke_path"
                          d="M0,4l3,3l5,-7"
                          fill="none"
                          class="stroke-purple-600 dark:stroke-purple-400"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-dasharray="0 0"
                          stroke-opacity="1"
                        ></path>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </g>
    <animateTransform
      href="#20186"
      attributeName="transform"
      type="translate"
      values="12 12;12 12;12 12;12 12;12 12;12 12;12 12;12 12"
      dur="5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.05;0.16;0.3;0.7;0.8;0.95;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animateTransform
      href="#20186"
      attributeName="transform"
      type="scale"
      values="1 1;1 1;1.1 1.1;1 1;1 1;1.1 1.1;1 1;1 1"
      dur="5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.05;0.16;0.3;0.7;0.8;0.95;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animateTransform
      href="#20186"
      attributeName="transform"
      type="translate"
      values="-12 -12;-12 -12;-12 -12;-12 -12;-12 -12;-12 -12;-12 -12;-12 -12"
      dur="5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.05;0.16;0.3;0.7;0.8;0.95;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1;0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="sum"
      fill="freeze"
    ></animateTransform>
    <animate
      href="#20188_stroke_path"
      attributeName="stroke-dasharray"
      values="0 12.97341561370353;0 12.97341561370353;0 12.97341561370353;0 12.97341561370353;0 12.97341561370353;0 12.97341561370353;1.108520561844173 11.864895051859357;7.561831457215117 5.411584156488413;11.340820440929551 1.6325951727739787;12.557238716788683 0.4161768969148457;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.84496595416191 0.12844965954161922;12.72036978440654 0.25304582929699027;7.523296559352631 5.450119054350899;1.4514811528202958 11.521934460883234;0.1156046935874573 12.857810920116071;0 12.97341561370353"
      dur="5s"
      repeatCount="indefinite"
      keyTimes="0;0.04;0.08;0.12;0.16;0.2;0.24;0.28;0.32;0.36;0.4;0.44;0.48;0.52;0.56;0.6;0.64;0.68;0.72;0.76;0.8;0.84;0.88;0.92;0.96;1"
      fill="freeze"
    ></animate>
    <animate
      href="#20188_stroke_path"
      attributeName="stroke-dashoffset"
      values="0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;-0.12459616975537054;-5.3216693948092795;-11.393484801341614;-12.729361260574453;-12.84496595416191"
      dur="5s"
      repeatCount="indefinite"
      keyTimes="0;0.04;0.08;0.12;0.16;0.2;0.24;0.28;0.32;0.36;0.4;0.44;0.48;0.52;0.56;0.6;0.64;0.68;0.72;0.76;0.8;0.84;0.88;0.92;0.96;1"
      fill="freeze"
    ></animate>
    <animate
      href="#20188"
      attributeName="opacity"
      values="0;0;1;1;0;0"
      dur="5s"
      repeatCount="indefinite"
      calcMode="spline"
      keyTimes="0;0.15;0.3;0.9;0.98;1"
      keySplines="0.5 0 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1;0.5 0 0.15 1;0.5 0.35 0.15 1"
      additive="replace"
      fill="freeze"
    ></animate>
  </svg>

  <div class="mr-[0.15rem] flex w-full items-center justify-between gap-3">
    <div class="w-3/4">
      <h3
        class="text-purple-600 text-base font-semibold"
        *ngIf="!canChangesBeValidated"
      >
        Your changes are pending
      </h3>
      <h3
        class="text-purple-600 text-base font-semibold"
        *ngIf="canChangesBeValidated"
      >
        You can validate your changes
      </h3>
      <div class="text-purple-600 mt-1 text-sm">
        <p *ngIf="!canChangesBeValidated">
          To confirm your modifications, come back at
          {{ validationDate }}
        </p>
        <p *ngIf="canChangesBeValidated">
          You can confirm your modifications until 
          {{ expirationDate }}
        </p>
      </div>
    </div>
    <div class="flex w-1/4 justify-end">
      <div class="flex gap-3">
        <button
          (click)="confirmChanges()"
          [ngClass]="
            canChangesBeValidated
              ? 'text-purple-600 cursor-pointer hover:bg-purple-100'
              : 'text-gray-500 cursor-not-allowed'
          "
          type="button"
          class="rounded-md px-3 py-2 text-sm font-medium"
        >
          Confirm
        </button>
        <button
          (click)="discardChanges()"
          type="button"
          class="purple-gradient text-white !transform rounded-md px-3 py-2 text-sm font-medium !transition-all hover:scale-105 hover:shadow-lg hover:shadow-purple-300 hover:dark:shadow-purple-800"
        >
          Discard
        </button>
      </div>
    </div>
  </div>
</div>
